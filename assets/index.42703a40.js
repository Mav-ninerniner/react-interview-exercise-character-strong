var H=Object.defineProperty,$=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var A=(r,t,a)=>t in r?H(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,w=(r,t)=>{for(var a in t||(t={}))D.call(t,a)&&A(r,a,t[a]);if(x)for(var a of x(t))I.call(t,a)&&A(r,a,t[a]);return r},F=(r,t)=>$(r,k(t));var M=(r,t)=>{var a={};for(var s in r)D.call(r,s)&&t.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&x)for(var s of x(r))t.indexOf(s)<0&&I.call(r,s)&&(a[s]=r[s]);return a};import{u as U,j as e,B as S,e as G,a as d,F as N,r as h,M as Y,b as W,c as K,d as q,f as z,g as Q,S as P,T as E,V,h as Z,i as X,R,C as J,k as ee,H as T,D as te,I as re,U as oe,L as se,l as ae,m as ie}from"./vendor.de33f16e.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};ne();var le="/react-interview-exercise-character-strong/assets/header_logo.1094da8d.png";const ce={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},de=o=>{var i=o,{variant:r,children:t,borderColor:a}=i,s=M(i,["variant","children","borderColor"]);const c=U("Card",{variant:r});return e(S,F(w({className:"cs-card",__css:c,borderColor:a},s),{children:t}))},ue={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},he={baseStyle:{bg:"white"}};var pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:ue,Input:he});const fe={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},y=G({colors:fe,components:w({Card:ce},pe)});const _=({children:r,color:t=y.colors.brand.blue,size:a=["50%","50%"],globSizes:s=[[40,80],[60,50],[20,80]],globPositions:o=[[20,10],[10,20],[20,15]],top:i,left:c,right:u,bottom:n,opacity:g=1,speed:l,radius:m,rotate:v})=>d(N,{children:[d("div",{className:"blob",style:{top:i,left:c,right:u,bottom:n,width:a[0],height:a[1],opacity:g,transform:v?`rotate(${v}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:t,width:s[0][0]+"%",height:s[0][1]+"%",top:o[0][0]+"%",left:o[0][1]+"%",animation:l?`move ${l*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob1",style:{backgroundColor:t,width:s[1][0]+"%",height:s[1][1]+"%",top:o[1][0]+"%",left:o[1][1]+"%",animation:l?`move ${l*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob2",style:{backgroundColor:t,width:s[2][0]+"%",height:s[2][1]+"%",top:o[2][0]+"%",left:o[2][1]+"%",animation:l?`move ${l*800}ms infinite alternate ease-in-out`:void 0,borderRadius:m}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:d("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]}),me=({children:r})=>d(N,{children:[d(S,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(_,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:y.colors.brand.green}),e(_,{size:["600px","600px"],left:"-50px",top:"-20px",color:y.colors.brand.green})]}),d(S,{className:"cs-header",position:"absolute",top:"0",right:"0",left:"0",width:"100vw",height:"80px",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:le,alt:"CharacterStrong Logo"})}),r]})]}),ge=async r=>{let t=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${r}%')&outFields=*&outSR=4326&f=json`,a=[],s=await(await fetch(t)).json();return a=[...s.features?s.features.map(o=>o.attributes):[]],a},Se=async(r,t)=>{let a=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${r}%')${t?`%20AND%20LEAID%20%3D%20'${t}'`:""}&outFields=*&outSR=4326&f=json`,s=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${r}%')${t?`%20AND%20LEAID%20%3D%20'${t}'`:""}&outFields=*&outSR=4326&f=json`,o=[],i=await(await fetch(a)).json(),c=await(await fetch(s)).json();return o=[...i.features?i.features.map(u=>u.attributes):[],...c.features?c.features.map(u=>u.attributes):[]],o},ve=({label:r,value:t})=>t==null?null:d(N,{children:[d(E,{fontWeight:"bold",children:[R.Children.toArray(r),":"]}),e(E,{children:t.toString()})]}),be=({isOpen:r,onClose:t,districtName:a,schools:s,loading:o,error:i})=>{const[c,u]=h.exports.useState(""),n=s.find(l=>l.NCESSCH===c),g=n?[["NCESSCH",n.NCESSCH],["LEAID",n.LEAID],["Name",n.NAME],["OPSTFIPS",n.OPSTFIPS],["Street",n.STREET],["City",n.CITY],["State",n.STATE],["ZIP",n.ZIP],["STFIP",n.STFIP],["CNTY",n.CNTY],["NMCNTY",n.NMCNTY],["Locale",n.LOCALE],["Latitude",n.LAT],["Longitude",n.LON]]:[];return d(Y,{isOpen:r,onClose:t,size:"xl",scrollBehavior:"inside",children:[e(W,{}),d(K,{maxH:"80vh",w:"600px",mx:"auto",children:[d(q,{children:["Schools in ",a]}),e(z,{}),d(Q,{px:6,overflowY:"auto",children:[o&&e(P,{}),i&&e(E,{color:"red.500",mb:2,children:i}),!o&&!i&&d(V,{spacing:4,align:"stretch",children:[e(Z,{placeholder:"Select a school\u2026",value:c,onChange:l=>u(l.target.value),children:s.map(l=>e("option",{value:String(l.NCESSCH),children:l.NAME},l.NCESSCH))}),n&&e(S,{p:4,borderWidth:"1px",borderRadius:"md",boxShadow:"sm",maxH:"600px",overflowY:"auto",overflowX:"hidden",w:"100%",pr:4,children:e(X,{columns:2,spacing:3,children:g.map(([l,m])=>e(ve,{label:l,value:m},l))})})]})]})]})]})},xe=()=>{const[r,t]=h.exports.useState(""),[a,s]=h.exports.useState([]),[o,i]=h.exports.useState(!1),[c,u]=h.exports.useState(null),[n,g]=h.exports.useState(null),[l,m]=h.exports.useState([]),[v,C]=h.exports.useState(!1),[B,b]=h.exports.useState(null),[O,L]=h.exports.useState(!1);h.exports.useEffect(()=>{if(!r||r.length<3){s([]),u(null),i(!1),g(null);return}i(!0),u(null),(async()=>{try{const f=await ge(r);s(f),f.length===0&&u("No districts found!")}catch(f){u(f.message||"Failed to load districts")}finally{i(!1)}})()},[r]),h.exports.useEffect(()=>{if(!n){m([]),b(null),C(!1);return}C(!0),b(null),(async()=>{try{const f=await Se("",n.LEAID);m(f),f.length===0&&b("No schools found!")}catch(f){b(f.message||"Failed to load schools")}finally{C(!1)}})()},[n]);const j=p=>{g(p),L(!0)};return d(J,{padding:"100px",minH:"90vh",overflowY:"auto",width:"",children:[e(ee,{initialScale:.9,in:!0,children:d(de,{variant:"rounded",borderColor:"teal",children:[e(T,{children:"School Data Finder"}),e(te,{margin:4}),e(T,{size:"md",children:"District Search"}),e(re,{placeholder:"Search for a school district\u2026",value:r,onChange:p=>t(p.target.value),mb:4}),o&&e(P,{mb:2}),c&&e(E,{color:"red.500",mb:2,children:c}),e(S,{maxH:"300px",overflowY:"auto",mb:4,pl:4,children:e(oe,{spacing:2,children:a.map(p=>e(se,{cursor:"pointer",fontWeight:(n==null?void 0:n.LEAID)===p.LEAID?"bold":"normal",onClick:()=>j(p),children:p.NAME},p.LEAID))})})]})}),n&&e(be,{isOpen:O,onClose:()=>L(!1),districtName:n.NAME,schools:l,loading:v,error:B})]})};function Ee(){return d("div",{className:"App",children:[e(me,{}),e(xe,{})]})}ae.render(e(R.StrictMode,{children:e(ie,{theme:y,children:e(Ee,{})})}),document.getElementById("root"));
