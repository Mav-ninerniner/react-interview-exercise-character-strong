var O=Object.defineProperty,U=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var A=(t,o,a)=>o in t?O(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,N=(t,o)=>{for(var a in o||(o={}))M.call(o,a)&&A(t,a,o[a]);if(w)for(var a of w(o))R.call(o,a)&&A(t,a,o[a]);return t},F=(t,o)=>U(t,G(o));var I=(t,o)=>{var a={};for(var r in t)M.call(t,r)&&o.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&w)for(var r of w(t))o.indexOf(r)<0&&R.call(t,r)&&(a[r]=t[r]);return a};import{u as Y,j as e,B as x,e as W,a as l,F as C,r as h,M as K,b as q,c as z,d as Q,f as V,g as Z,S as _,T as y,V as X,I as P,U as B,L as H,h as J,C as ee,i as te,H as j,D as oe,R as re,k as se,l as ae}from"./vendor.777a5c30.js";const ie=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}};ie();var ne="/react-interview-exercise-character-strong/assets/header_logo.1094da8d.png";const le={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},ce=s=>{var i=s,{variant:t,children:o,borderColor:a}=i,r=I(i,["variant","children","borderColor"]);const c=Y("Card",{variant:t});return e(x,F(N({className:"cs-card",__css:c,borderColor:a},r),{children:o}))},de={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},ue={baseStyle:{bg:"white"}};var he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:de,Input:ue});const pe={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},L=W({colors:pe,components:N({Card:le},he)});const k=({children:t,color:o=L.colors.brand.blue,size:a=["50%","50%"],globSizes:r=[[40,80],[60,50],[20,80]],globPositions:s=[[20,10],[10,20],[20,15]],top:i,left:c,right:p,bottom:u,opacity:S=1,speed:n,radius:m,rotate:b})=>l(C,{children:[l("div",{className:"blob",style:{top:i,left:c,right:p,bottom:u,width:a[0],height:a[1],opacity:S,transform:b?`rotate(${b}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:o,width:r[0][0]+"%",height:r[0][1]+"%",top:s[0][0]+"%",left:s[0][1]+"%",animation:n?`move ${n*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob1",style:{backgroundColor:o,width:r[1][0]+"%",height:r[1][1]+"%",top:s[1][0]+"%",left:s[1][1]+"%",animation:n?`move ${n*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob2",style:{backgroundColor:o,width:r[2][0]+"%",height:r[2][1]+"%",top:s[2][0]+"%",left:s[2][1]+"%",animation:n?`move ${n*800}ms infinite alternate ease-in-out`:void 0,borderRadius:m}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:l("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]}),fe=({children:t})=>l(C,{children:[l(x,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(k,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:L.colors.brand.green}),e(k,{size:["600px","600px"],left:"-50px",top:"-20px",color:L.colors.brand.green})]}),l(x,{className:"cs-header",position:"absolute",top:"0",right:"0",left:"0",width:"100vw",height:"80px",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:ne,alt:"CharacterStrong Logo"})}),t]})]}),me=async t=>{let o=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')&outFields=*&outSR=4326&f=json`,a=[],r=await(await fetch(o)).json();return a=[...r.features?r.features.map(s=>s.attributes):[]],a},ge=async(t,o)=>{let a=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,r=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,s=[],i=await(await fetch(a)).json(),c=await(await fetch(r)).json();return console.log(c.features[0]),s=[...i.features?i.features.map(p=>p.attributes):[],...c.features?c.features.map(p=>p.attributes):[]],s},Se=({label:t,value:o})=>o==null?null:l(C,{children:[l(y,{fontWeight:"bold",children:[t,":"]}),e(y,{children:o})]}),be=({isOpen:t,onClose:o,districtName:a,schools:r,loading:s,error:i})=>{const[c,p]=h.exports.useState(""),[u,S]=h.exports.useState(""),n=r.find(d=>String(d.NCESSCH)===c),m=h.exports.useMemo(()=>r.filter(d=>{var v;return(v=d.NAME)==null?void 0:v.toLowerCase().includes(u.toLowerCase())}),[r,u]);h.exports.useEffect(()=>{t&&(S(""),p(""))},[t,a]);const b=n?[["Name of institution",n.NAME],["School year",n.SCHOOLYEAR],["Location Street",n.STREET],["Location City",n.CITY],["Location State",n.STATE],["Location ZIP",n.ZIP],["County Name",n.NMCNTY]]:[];return l(K,{isOpen:t,onClose:o,size:"xl",scrollBehavior:"inside",children:[e(q,{}),l(z,{maxH:"80vh",w:"600px",mx:"auto",children:[l(Q,{children:["Schools in ",a]}),e(V,{}),l(Z,{px:6,overflowY:"auto",children:[s&&e(_,{}),i&&e(y,{color:"red.500",mb:2,children:i}),!s&&!i&&l(X,{spacing:4,align:"stretch",children:[e(P,{placeholder:"Filter schools\u2026",value:u,onChange:d=>S(d.target.value)}),e(x,{maxH:"300px",overflowY:"auto",mb:4,pl:4,children:l(B,{spacing:2,children:[m.map(d=>e(H,{cursor:"pointer",px:3,py:2,borderRadius:"md",bg:c===String(d.NCESSCH)?"teal.100":"transparent",_hover:{bg:"teal.50"},transition:"background-color 0.2s",onClick:()=>p(String(d.NCESSCH)),children:d.NAME},d.NCESSCH)),m.length===0&&l(y,{textAlign:"center",color:"gray.500",children:["No schools match \u201C",u,"\u201D"]})]})}),n&&e(x,{p:4,borderWidth:"1px",borderRadius:"md",boxShadow:"sm",maxH:"600px",overflowY:"auto",overflowX:"hidden",w:"100%",pr:4,children:e(J,{columns:2,spacing:3,children:b.map(([d,v])=>e(Se,{label:d,value:v},d))})})]})]})]})]})},ve=()=>{const[t,o]=h.exports.useState(""),[a,r]=h.exports.useState([]),[s,i]=h.exports.useState(!1),[c,p]=h.exports.useState(null),[u,S]=h.exports.useState(null),[n,m]=h.exports.useState([]),[b,d]=h.exports.useState(!1),[v,E]=h.exports.useState(null),[T,D]=h.exports.useState(!1);h.exports.useEffect(()=>{if(t.length<3){r([]),p(null),i(!1),S(null);return}i(!0),p(null),(async()=>{try{const g=await me(t);r(g),g.length===0&&p("No districts found!")}catch(g){p(g.message||"Failed to load districts")}finally{i(!1)}})()},[t]),h.exports.useEffect(()=>{if(!u){m([]),E(null),d(!1);return}d(!0),E(null),(async()=>{try{const g=await ge("",u.LEAID);m(g),g.length===0&&E("No schools found!")}catch(g){E(g.message||"Failed to load schools")}finally{d(!1)}})()},[u]);const $=f=>{S(f),D(!0)};return l(ee,{padding:"100px",minH:"90vh",overflowY:"auto",width:"",children:[e(te,{initialScale:.9,in:!0,children:l(ce,{variant:"rounded",borderColor:"teal",children:[e(j,{children:"School Data Finder"}),e(oe,{margin:4}),e(j,{size:"md",children:"District Search"}),e(P,{name:"school-district",placeholder:"Search for a school district\u2026",value:t,onChange:f=>o(f.target.value),mb:4}),s&&e(_,{mb:2}),c&&e(y,{color:"red.500",mb:2,children:c}),e(x,{maxH:"300px",overflowY:"auto",mb:4,pl:4,children:e(B,{spacing:2,children:a?a.map(f=>e(H,{cursor:"pointer",px:3,py:2,borderRadius:"md",fontWeight:(u==null?void 0:u.LEAID)===f.LEAID?"bold":"normal",_hover:{bg:"teal.50",color:"teal.700"},transition:"background-color 0.2s, color 0.2s",onClick:()=>$(f),children:f.NAME},f.LEAID)):e(C,{})})})]})}),u&&e(be,{isOpen:T,onClose:()=>D(!1),districtName:u.NAME,schools:n,loading:b,error:v})]})};function xe(){return l("div",{className:"App",children:[e(fe,{}),e(ve,{})]})}re.render(e(se.StrictMode,{children:e(ae,{theme:L,children:e(xe,{})})}),document.getElementById("root"));
