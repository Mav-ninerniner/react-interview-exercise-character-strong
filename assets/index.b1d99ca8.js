var $=Object.defineProperty,G=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var I=(t,o,a)=>o in t?$(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,N=(t,o)=>{for(var a in o||(o={}))A.call(o,a)&&I(t,a,o[a]);if(w)for(var a of w(o))R.call(o,a)&&I(t,a,o[a]);return t},F=(t,o)=>G(t,U(o));var P=(t,o)=>{var a={};for(var r in t)A.call(t,r)&&o.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&w)for(var r of w(t))o.indexOf(r)<0&&R.call(t,r)&&(a[r]=t[r]);return a};import{u as Y,j as e,B as S,e as K,a as l,F as C,b as W,S as D,G as z,M as q,r as h,c as Q,d as V,f as X,g as Z,h as J,i as ee,T as y,V as te,I as _,U as k,L as H,k as oe,C as re,l as se,H as B,D as ae,R as ie,m as ne,n as le}from"./vendor.635ce8e8.js";const ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}};ce();var de="/react-interview-exercise-character-strong/assets/header_logo.1094da8d.png";const ue={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},he=s=>{var i=s,{variant:t,children:o,borderColor:a}=i,r=P(i,["variant","children","borderColor"]);const c=Y("Card",{variant:t});return e(S,F(N({className:"cs-card",__css:c,borderColor:a},r),{children:o}))},pe={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},fe={baseStyle:{bg:"white"}};var me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:pe,Input:fe});const ge={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},L=K({colors:ge,components:N({Card:ue},me)});const j=({children:t,color:o=L.colors.brand.blue,size:a=["50%","50%"],globSizes:r=[[40,80],[60,50],[20,80]],globPositions:s=[[20,10],[10,20],[20,15]],top:i,left:c,right:p,bottom:u,opacity:b=1,speed:n,radius:m,rotate:v})=>l(C,{children:[l("div",{className:"blob",style:{top:i,left:c,right:p,bottom:u,width:a[0],height:a[1],opacity:b,transform:v?`rotate(${v}deg)`:void 0},children:[e("div",{className:"glob",style:{backgroundColor:o,width:r[0][0]+"%",height:r[0][1]+"%",top:s[0][0]+"%",left:s[0][1]+"%",animation:n?`move ${n*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob1",style:{backgroundColor:o,width:r[1][0]+"%",height:r[1][1]+"%",top:s[1][0]+"%",left:s[1][1]+"%",animation:n?`move ${n*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:m}}),e("div",{className:"glob2",style:{backgroundColor:o,width:r[2][0]+"%",height:r[2][1]+"%",top:s[2][0]+"%",left:s[2][1]+"%",animation:n?`move ${n*800}ms infinite alternate ease-in-out`:void 0,borderRadius:m}})]}),e("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:e("defs",{children:l("filter",{id:"goo",children:[e("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),e("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),e("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),e("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:e("defs",{children:e("filter",{id:"duotone-filter-post-one",children:e("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]}),Se=({children:t})=>l(C,{children:[l(S,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[e(j,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:L.colors.brand.green}),e(j,{size:["600px","600px"],left:"-50px",top:"-20px",color:L.colors.brand.green})]}),l(S,{className:"cs-header",position:"absolute",top:"0",right:"0",left:"0",width:"100vw",height:"80px",children:[e("a",{href:"https://characterstrong.com",children:e("img",{className:"header-img",src:de,alt:"CharacterStrong Logo"})}),t]})]}),be=async t=>{let o=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')&outFields=*&outSR=4326&f=json`,a=[],r=await(await fetch(o)).json();return a=[...r.features?r.features.map(s=>s.attributes):[]],a},ve=async(t,o)=>{let a=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,r=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${t}%')${o?`%20AND%20LEAID%20%3D%20'${o}'`:""}&outFields=*&outSR=4326&f=json`,s=[],i=await(await fetch(a)).json(),c=await(await fetch(r)).json();return console.log(c.features[0]),s=[...i.features?i.features.map(p=>p.attributes):[],...c.features?c.features.map(p=>p.attributes):[]],s};function xe({lat:t,lng:o}){const a="AIzaSyDM6HXbc853b-t0xf5PW6kkE1HdB9Vc5ME",{isLoaded:r,loadError:s}=W({googleMapsApiKey:a});if(s)return e(S,{children:"Error loading map"});if(!r)return e(D,{});const i={lat:t,lng:o};return e(S,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:e(z,{mapContainerStyle:{width:"100%",height:"250px"},zoom:15,center:i,children:e(q,{position:i})})})}const ye=({label:t,value:o})=>o==null?null:l(C,{children:[l(y,{fontWeight:"bold",children:[t,":"]}),e(y,{children:o})]}),Ee=({isOpen:t,onClose:o,districtName:a,schools:r,loading:s,error:i})=>{const[c,p]=h.exports.useState(""),[u,b]=h.exports.useState(""),n=r.find(d=>String(d.NCESSCH)===c),m=h.exports.useMemo(()=>r.filter(d=>{var x;return(x=d.NAME)==null?void 0:x.toLowerCase().includes(u.toLowerCase())}),[r,u]);h.exports.useEffect(()=>{t&&(b(""),p(""))},[t,a]);const v=n?[["Name of institution",n.NAME],["School year",n.SCHOOLYEAR],["Location Street",n.STREET],["Location City",n.CITY],["Location State",n.STATE],["Location ZIP",n.ZIP],["County Name",n.NMCNTY]]:[];return l(Q,{isOpen:t,onClose:o,size:"xl",scrollBehavior:"inside",children:[e(V,{}),l(X,{maxH:"80vh",w:"600px",mx:"auto",children:[l(Z,{children:["Schools in ",a]}),e(J,{}),l(ee,{px:6,overflowY:"auto",children:[s&&e(D,{}),i&&e(y,{color:"red.500",mb:2,children:i}),!s&&!i&&l(te,{spacing:4,align:"stretch",children:[e(_,{placeholder:"Filter schools\u2026",value:u,onChange:d=>b(d.target.value)}),e(S,{maxH:"300px",overflowY:"auto",mb:4,pl:4,children:l(k,{spacing:2,children:[m.map(d=>e(H,{cursor:"pointer",px:3,py:2,borderRadius:"md",bg:c===String(d.NCESSCH)?"teal.100":"transparent",_hover:{bg:"teal.50"},transition:"background-color 0.2s",onClick:()=>p(String(d.NCESSCH)),children:d.NAME},d.NCESSCH)),m.length===0&&l(y,{textAlign:"center",color:"gray.500",children:["No schools match \u201C",u,"\u201D"]})]})}),n&&l(S,{p:4,borderWidth:"1px",borderRadius:"md",boxShadow:"sm",maxH:"600px",overflowY:"auto",overflowX:"hidden",w:"100%",pr:4,children:[e(oe,{columns:2,spacing:3,children:v.map(([d,x])=>e(ye,{label:d,value:x},d))}),e(xe,{lat:n.LAT,lng:n.LON})]})]})]})]})]})},we=()=>{const[t,o]=h.exports.useState(""),[a,r]=h.exports.useState([]),[s,i]=h.exports.useState(!1),[c,p]=h.exports.useState(null),[u,b]=h.exports.useState(null),[n,m]=h.exports.useState([]),[v,d]=h.exports.useState(!1),[x,E]=h.exports.useState(null),[T,M]=h.exports.useState(!1);h.exports.useEffect(()=>{if(t.length<3){r([]),p(null),i(!1),b(null);return}i(!0),p(null),(async()=>{try{const g=await be(t);r(g),g.length===0&&p("No districts found!")}catch(g){p(g.message||"Failed to load districts")}finally{i(!1)}})()},[t]),h.exports.useEffect(()=>{if(!u){m([]),E(null),d(!1);return}d(!0),E(null),(async()=>{try{const g=await ve("",u.LEAID);m(g),g.length===0&&E("No schools found!")}catch(g){E(g.message||"Failed to load schools")}finally{d(!1)}})()},[u]);const O=f=>{b(f),M(!0)};return l(re,{padding:"100px",minH:"90vh",overflowY:"auto",width:"",children:[e(se,{initialScale:.9,in:!0,children:l(he,{variant:"rounded",borderColor:"teal",children:[e(B,{children:"School Data Finder"}),e(ae,{margin:4}),e(B,{size:"md",children:"District Search"}),e(_,{name:"school-district",placeholder:"Search for a school district\u2026",value:t,onChange:f=>o(f.target.value),mb:4}),s&&e(D,{mb:2}),c&&e(y,{color:"red.500",mb:2,children:c}),e(S,{maxH:"300px",overflowY:"auto",mb:4,pl:4,children:e(k,{spacing:2,children:a?a.map(f=>e(H,{cursor:"pointer",px:3,py:2,borderRadius:"md",fontWeight:(u==null?void 0:u.LEAID)===f.LEAID?"bold":"normal",_hover:{bg:"teal.50",color:"teal.700"},transition:"background-color 0.2s, color 0.2s",onClick:()=>O(f),children:f.NAME},f.LEAID)):e(C,{})})})]})}),u&&e(Ee,{isOpen:T,onClose:()=>M(!1),districtName:u.NAME,schools:n,loading:v,error:x})]})};function Ce(){return l("div",{className:"App",children:[e(Se,{}),e(we,{})]})}ie.render(e(ne.StrictMode,{children:e(le,{theme:L,children:e(Ce,{})})}),document.getElementById("root"));
